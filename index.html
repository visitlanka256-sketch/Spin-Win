
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spin & Win Free Data</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(180deg,#000,#111);
  color:#fff;
  text-align:center;
}
.container{
  max-width:420px;
  margin:auto;
  padding:15px;
}
h1{color:#00ffcc;font-size:22px;margin:10px 0;}
p{font-size:14px;color:#ccc;}

.pointer{
  width:0;height:0;
  border-left:12px solid transparent;
  border-right:12px solid transparent;
  border-bottom:22px solid red;
  margin:10px auto;
}

#wheelBox{
  width:80vw;
  max-width:280px;
  aspect-ratio:1/1;
  margin:10px auto;
}
#wheel{
  width:100%;
  height:100%;
  border-radius:50%;
  border:6px solid #fff;
  transition:transform 4s cubic-bezier(.17,.67,.14,1);
}

button{
  width:100%;
  max-width:260px;
  margin:15px auto;
  padding:14px;
  font-size:18px;
  border:none;
  border-radius:10px;
  background:#00ffcc;
  color:#000;
  font-weight:bold;
}
button:disabled{background:#444;color:#aaa;}

#popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}
.popup{
  background:#111;
  padding:20px;
  width:90%;
  max-width:300px;
  border-radius:15px;
}

#progressBar{
  background:#333;
  border-radius:10px;
  overflow:hidden;
  margin:10px 0;
}
#progressFill{
  height:12px;
  width:0%;
  background:#00ffcc;
}
#countdown{
  font-size:22px;
  color:#00ffcc;
  margin-top:10px;
}
a.claim{
  display:block;
  margin-top:15px;
  padding:14px;
  background:#ffcc00;
  color:#000;
  text-decoration:none;
  border-radius:10px;
  font-weight:bold;
}
#detailsForm input{
  width:100%;
  padding:8px;
  margin:5px 0;
  border-radius:8px;
  border:none;
}
#detailsForm button{
  width:100%;
  padding:10px;
  background:#00ffcc;
  color:#000;
  font-weight:bold;
  border:none;
  border-radius:8px;
  margin-top:5px;
}
canvas.confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
}
</style>
</head>

<body>

<div class="container">
  <h1>ðŸŽ¡ Spin & Win Free Data</h1>
  <p>3 spins per day â€¢ Mobile users only</p>

  <div class="pointer"></div>

  <div id="wheelBox">
    <canvas id="wheel"></canvas>
  </div>

  <button id="spinBtn" onclick="spin()">Loadingâ€¦</button>
</div>

<!-- Popup -->
<div id="popup">
  <div class="popup">
    <h2>ðŸŽ‰ You Won</h2>
    <h1 id="prize"></h1>
    <p id="status">Validating rewardâ€¦</p>

    <div id="progressBar">
      <div id="progressFill"></div>
    </div>

    <div id="countdown"></div>

    <a id="claimBtn" class="claim" href="#">Enter Details to Claim</a>

    <div id="detailsForm" style="display:none;">
      <input type="text" id="userName" placeholder="Your Name">
      <input type="tel" id="userPhone" placeholder="Phone Number">
      <button id="submitDetails">Submit</button>
    </div>
  </div>
</div>

<canvas id="confetti" class="confetti"></canvas>

<audio id="spinSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2d6c0c9e08.mp3"></audio>
<audio id="winSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_f5f94c2e36.mp3"></audio>

<script>
/* ===== CONFIG ===== */
const prizes=["100MB","250MB","500MB","1GB","2GB","3GB","5GB","10GB"];
const AD_LINK="https://www.effectivegatecpm.com/tmwrndpge9?key=4ddfcec174b4acd26e1c67c6d3a56117";
const MAX_SPINS=3;
const RESET_TIME=24*60*60*1000;

/* ===== STATE ===== */
let spinsLeft, lastSpin, adClicked=false;
const spinBtn=document.getElementById("spinBtn");

/* ===== INIT ===== */
const now=Date.now();
lastSpin=localStorage.getItem("lastSpinTime");
if(!lastSpin || now-lastSpin>RESET_TIME){
  spinsLeft=MAX_SPINS;
  localStorage.setItem("spinsLeft",spinsLeft);
  localStorage.setItem("lastSpinTime",now);
}else{
  spinsLeft=parseInt(localStorage.getItem("spinsLeft")||MAX_SPINS);
}
updateButton();

/* ===== WHEEL DRAW ===== */
const canvas=document.getElementById("wheel");
const ctx=canvas.getContext("2d");

function resize(){
  const s=canvas.parentElement.offsetWidth;
  canvas.width=s;canvas.height=s;
  drawWheel();
}
window.addEventListener("resize",resize);resize();

function drawWheel(){
  const arc=Math.PI*2/prizes.length;
  const colors=["#ff4757","#ffa502","#2ed573","#1e90ff"];
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<prizes.length;i++){
    ctx.beginPath();
    ctx.fillStyle=colors[i%4];
    ctx.moveTo(canvas.width/2,canvas.height/2);
    ctx.arc(canvas.width/2,canvas.height/2,canvas.width/2,arc*i,arc*(i+1));
    ctx.fill();
    ctx.save();
    ctx.translate(canvas.width/2,canvas.height/2);
    ctx.rotate(arc*i+arc/2);
    ctx.fillStyle="#000";
    ctx.font="bold 14px Arial";
    ctx.fillText(prizes[i],canvas.width/4,5);
    ctx.restore();
  }
}

/* ===== SPIN LOGIC ===== */
let angle=0;

function updateButton(){
  if(spinsLeft<=0){
    spinBtn.disabled=true;
    spinBtn.innerText="No Spins Left";
  }else{
    spinBtn.disabled=false;
    spinBtn.innerText=`SPIN NOW (${spinsLeft} left)`;
  }
}

function spin(){
  if(spinsLeft<=0)return;
  spinsLeft--;
  localStorage.setItem("spinsLeft",spinsLeft);
  localStorage.setItem("lastSpinTime",Date.now());
  updateButton();

  document.getElementById("spinSound").play();
  angle+=360*5+Math.random()*360;
  canvas.style.transform=`rotate(${angle}deg)`;
  setTimeout(showResult,4000);
}

function showResult(){
  document.getElementById("winSound").play();
  const index=Math.floor(((angle%360)/360)*prizes.length);
  document.getElementById("prize").innerText=prizes[prizes.length-1-index];
  document.getElementById("popup").style.display="flex";
  document.getElementById("claimBtn").style.display="block";
  document.getElementById("detailsForm").style.display="none";
  adClicked=false;
  startProgress();
}

/* ===== FAKE PROGRESS ===== */
function startProgress(){
  let p=0;
  const fill=document.getElementById("progressFill");
  const status=document.getElementById("status");
  const t=setInterval(()=>{
    p++;fill.style.width=p+"%";
    if(p==40)status.innerText="Checking availabilityâ€¦";
    if(p==70)status.innerText="Finalizing rewardâ€¦";
    if(p>=100){
      clearInterval(t);
      startCountdown();
      confetti();
    }
  },40);
}

/* ===== AD CLICK + FORM ===== */
document.getElementById("claimBtn").addEventListener("click",(e)=>{
  e.preventDefault();
  document.getElementById("claimBtn").style.display="none";
  document.getElementById("detailsForm").style.display="block";
});

document.getElementById("submitDetails").addEventListener("click",()=>{
  const name=document.getElementById("userName").value.trim();
  const phone=document.getElementById("userPhone").value.trim();
  if(!name || !phone){
    alert("Please enter name and phone!");
    return;
  }
  // Save locally
  let submissions=JSON.parse(localStorage.getItem("submissions")||"[]");
  submissions.push({name, phone, prize:document.getElementById("prize").innerText, time:Date.now()});
  localStorage.setItem("submissions",JSON.stringify(submissions));
  // Redirect to Ad
  location.href=AD_LINK;
});

/* ===== COUNTDOWN ===== */
function startCountdown(){
  let c=5;
  const cd=document.getElementById("countdown");
  cd.innerText="Redirecting in "+c;
  const t=setInterval(()=>{
    c--;cd.innerText="Redirecting in "+c;
    if(c<=0){
      clearInterval(t);
      // Redirect if user hasn't submitted
      if(!adClicked) location.href=AD_LINK;
    }
  },1000);
}

/* ===== CONFETTI ===== */
function confetti(){
  const c=document.getElementById("confetti");
  const x=c.getContext("2d");
  c.width=innerWidth;c.height=innerHeight;
  let p=[];
  for(let i=0;i<120;i++)
    p.push({x:Math.random()*c.width,y:Math.random()*c.height,r:3+Math.random()*4,s:2+Math.random()*3,c:`hsl(${Math.random()*360},100%,50%)`});
  (function a(){
    x.clearRect(0,0,c.width,c.height);
    p.forEach(e=>{
      e.y+=e.s;if(e.y>c.height)e.y=0;
      x.fillStyle=e.c;x.beginPath();
      x.arc(e.x,e.y,e.r,0,Math.PI*2);x.fill();
    });
    requestAnimationFrame(a);
  })();
}
</script>

</body>
</html>
